<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ares: EMPulse Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>EMPulse Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="EMPulse" -->
<p><code>#include &lt;Misc/EMPulse.h&gt;</code></p>

<p><a href="class_e_m_pulse-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a75940911afe58f6b0f99a26eeef81540">CreateEMPulse</a> (<a class="el" href="class_warhead_type_ext_1_1_ext_data.html">WarheadTypeExt::ExtData</a> *Warhead, CoordStruct *Target, TechnoClass *Firer)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Paralyses all units using an EMP cellspread weapon.  <a href="#a75940911afe58f6b0f99a26eeef81540"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a46041f950a72e7479ba8d47e93937b5a">DisableEMPEffect</a> (TechnoClass *Techno)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets all properties to re-enable a Techno.  <a href="#a46041f950a72e7479ba8d47e93937b5a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#acae411b2800c152fdb7647c912a421e0">IsTypeEMPProne</a> (TechnoTypeClass *Type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets whether an EMP would have an effect on a TechnoType.  <a href="#acae411b2800c152fdb7647c912a421e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#ae2a7d8be2beb4057f72e5aec4f2cdcb1">IsDeactivationAdvisable</a> (TechnoClass *Techno)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets whether this Techno should be deactivated right now.  <a href="#ae2a7d8be2beb4057f72e5aec4f2cdcb1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a61f0c37d20dc3bc29f34d497b456c239">UpdateSparkleAnim</a> (TechnoClass *Techno)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the sparkle animation of Techno.  <a href="#a61f0c37d20dc3bc29f34d497b456c239"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a8cb96ccf83aa30ecbf474d625f1cf6ef">enableEMPEffect</a> (TechnoClass *, ObjectClass *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets all properties to disable a Techno.  <a href="#a8cb96ccf83aa30ecbf474d625f1cf6ef"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a8bf999e351f0c86e0ae7130ca2d57248">deliverEMPDamage</a> (ObjectClass *, TechnoClass *, <a class="el" href="class_warhead_type_ext_1_1_ext_data.html">WarheadTypeExt::ExtData</a> *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deals EMP damage the object.  <a href="#a8bf999e351f0c86e0ae7130ca2d57248"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a42ff43d73b38e829f54e42f5ca5daade">isEMPTypeImmune</a> (TechnoClass *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets whether a Techno is type immune to EMP.  <a href="#a42ff43d73b38e829f54e42f5ca5daade"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a5871a06d4aaa50bf1b3cc0b6b37936cf">isEMPImmune</a> (TechnoClass *, HouseClass *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets whether a Techno is immune to an EMP fired by a house.  <a href="#a5871a06d4aaa50bf1b3cc0b6b37936cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a12fb80c513248acdd3e1e64a13fb91e2">isCurrentlyEMPImmune</a> (TechnoClass *, HouseClass *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets whether a Techno is currently immune to EMPs fired by a house.  <a href="#a12fb80c513248acdd3e1e64a13fb91e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#aba6c1cd17600a649e0c4f282825cd850">isEligibleEMPTarget</a> (TechnoClass *, HouseClass *, WarheadTypeClass *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets whether a Techno is a valid target for EMPs fired by a house.  <a href="#aba6c1cd17600a649e0c4f282825cd850"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#ae45b8d77bd3cd58bb1bfaf647af2656b">updateRadarBlackout</a> (TechnoClass *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the radar outage for the owning player.  <a href="#ae45b8d77bd3cd58bb1bfaf647af2656b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#ab8e45e0a1a4ed89481378782b5ef9d7e">updateSpawnManager</a> (TechnoClass *, ObjectClass *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the SpawnManager to account for the EMP effect.  <a href="#ab8e45e0a1a4ed89481378782b5ef9d7e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a9861f36902003925c8aaea5082f0121b">updateSlaveManager</a> (TechnoClass *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the SlaveManager to account for the EMP effect.  <a href="#a9861f36902003925c8aaea5082f0121b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a85881f5b68e24bef805079881666bceb">announceAttack</a> (TechnoClass *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If the victim is owned by the human player creates radar events and EVA warnings.  <a href="#a85881f5b68e24bef805079881666bceb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#af4b3b9b8ea4b6259de2b9d7f0c1d0c37">thresholdExceeded</a> (TechnoClass *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks whether a Techno should be considered destroyed.  <a href="#af4b3b9b8ea4b6259de2b9d7f0c1d0c37"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#a5315faaef01d515d3f8dceb582f449e8">supportVerses</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307">verbose</a> = false</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enables verbose debug output for some <a class="el" href="class_warhead_type_ext.html">WarheadTypeExt</a> functions.  <a href="#ac5be0a3f0350827da617ba594d1cd307"></a><br/></td></tr>
</table>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a85881f5b68e24bef805079881666bceb"></a><!-- doxytag: member="EMPulse::announceAttack" ref="a85881f5b68e24bef805079881666bceb" args="(TechnoClass *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EMPulse::announceAttack </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Techno</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If the victim is owned by the human player creates radar events and EVA warnings. </p>
<p>Creates a radar event and makes EVA tell you so if the Techno is a resource gatherer or harvester. If it is a building that can not be undeployed and counts as BaseNormal a base under attack event is raised.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Techno</em>&nbsp;</td><td>The Techno that has been attacked.</td></tr>
  </table>
  </dd>
</dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-04-29 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                 {
        <span class="keyword">enum</span> AttackEvents {None = 0, Base = 1, Harvester = 2};
        AttackEvents rEvent = None;

        <span class="comment">// find out what event is the most appropriate.</span>
        <span class="keywordflow">if</span> (Techno &amp;&amp; (Techno-&gt;Owner == HouseClass::Player)) {
                <span class="keywordflow">if</span> (BuildingClass * Building = specific_cast&lt;BuildingClass *&gt;(Techno)) {
                        <span class="keywordflow">if</span>(Building-&gt;Type-&gt;ResourceGatherer) {
                                <span class="comment">// slave miner, for example</span>
                                rEvent = Harvester;
                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!Building-&gt;Type-&gt;Insignificant &amp;&amp; !Building-&gt;Type-&gt;BaseNormal) {
                                rEvent = Base;
                        }
                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (UnitClass * Unit = specific_cast&lt;UnitClass *&gt;(Techno)) {
                        <span class="keywordflow">if</span> (Unit-&gt;Type-&gt;Harvester || Unit-&gt;Type-&gt;ResourceGatherer) {
                                rEvent = Harvester;
                        }
                }
        }

        <span class="comment">// handle the event.</span>
        <span class="keywordflow">if</span> (rEvent != None) {
                CellStruct xy;
                Techno-&gt;GetMapCoords(&amp;xy);

                <span class="keywordflow">switch</span> (rEvent) {
                        <span class="keywordflow">case</span> Harvester:
                                <span class="keywordflow">if</span> (RadarEventClass::Create(RADAREVENT_OREMINERUNDERATTACK, xy))
                                        VoxClass::Play(<span class="stringliteral">&quot;EVA_OreMinerUnderAttack&quot;</span>, -1, -1);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> Base:
                                HouseClass::Player-&gt;BuildingUnderAttack(specific_cast&lt;BuildingClass *&gt;(Techno));
                                <span class="keywordflow">break</span>;
                }
        }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a75940911afe58f6b0f99a26eeef81540"></a><!-- doxytag: member="EMPulse::CreateEMPulse" ref="a75940911afe58f6b0f99a26eeef81540" args="(WarheadTypeExt::ExtData *Warhead, CoordStruct *Target, TechnoClass *Firer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EMPulse::CreateEMPulse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_warhead_type_ext_1_1_ext_data.html">WarheadTypeExt::ExtData</a> *&nbsp;</td>
          <td class="paramname"> <em>Warhead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CoordStruct *&nbsp;</td>
          <td class="paramname"> <em>Coords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Firer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Paralyses all units using an EMP cellspread weapon. </p>
<p>All Technos in the EMPulse's target cells get affected by an EMP and get deactivated temporarily. Their special functions stop working until the EMP ceases. Flying Aircraft crashes.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="class_e_m_pulse.html">EMPulse</a></em>&nbsp;</td><td>The electromagnetic pulse to create. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Coords</em>&nbsp;</td><td>The location the projectile detonated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Firer</em>&nbsp;</td><td>The Techno that fired the pulse.</td></tr>
  </table>
  </dd>
</dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-05-20 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                                                                   {
        <span class="keywordflow">if</span> (!Warhead) {
                <a class="code" href="class_debug.html#a4dcfff56d6e69bd62771feadb91014de">Debug::DevLog</a>(<a class="code" href="class_debug.html#a38f58dd0c1bec9042ead4a8eea1f3db1a84c6ea9e411b9a465c18af311547f156">Debug::Error</a>, <span class="stringliteral">&quot;Trying to CreateEMPulse() with Warhead pointing to NULL. Funny.\n&quot;</span>);
                <span class="keywordflow">return</span>;
        }

        <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                Debug::Log(<span class="stringliteral">&quot;[CreateEMPulse] Duration: %d, Cap: %d\n&quot;</span>, Warhead-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#af595488cc118b56526cd55ec386cfffa">EMP_Duration</a>, Warhead-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#a64b32fb4b774472e9d9318c26edcb8a1">EMP_Cap</a>);
        }

        <span class="comment">// set of affected objects. every object can be here only once.</span>
        DynamicVectorClass&lt;TechnoClass*&gt; *items = <a class="code" href="class_helpers_1_1_alex.html#a1bf422e766e7704df99f1c27de3fc6ca" title="Gets a list of all units in range of a cell spread weapon.">Helpers::Alex::getCellSpreadItems</a>(Coords,
                Warhead-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>-&gt;CellSpread, <span class="keyword">true</span>);

        <span class="comment">// affect each object</span>
        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;items-&gt;Count; ++i) {
                <a class="code" href="class_e_m_pulse.html#a8bf999e351f0c86e0ae7130ca2d57248" title="Deals EMP damage the object.">deliverEMPDamage</a>(items-&gt;GetItem(i), Firer, Warhead);
        }

        <span class="comment">// tidy up</span>
        items-&gt;Clear();
        <span class="keyword">delete</span> items;

        <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                Debug::Log(<span class="stringliteral">&quot;[CreateEMPulse] Done.\n&quot;</span>);
        }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8bf999e351f0c86e0ae7130ca2d57248"></a><!-- doxytag: member="EMPulse::deliverEMPDamage" ref="a8bf999e351f0c86e0ae7130ca2d57248" args="(ObjectClass *, TechnoClass *, WarheadTypeExt::ExtData *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EMPulse::deliverEMPDamage </td>
          <td>(</td>
          <td class="paramtype">ObjectClass *&nbsp;</td>
          <td class="paramname"> <em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Firer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_warhead_type_ext_1_1_ext_data.html">WarheadTypeExt::ExtData</a> *&nbsp;</td>
          <td class="paramname"> <em>Warhead</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deals EMP damage the object. </p>
<p>Applies, removes or alters the EMP effect on a given unit.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>object</em>&nbsp;</td><td>The Techno that should get affected by EMP.</td></tr>
  </table>
  </dd>
</dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-06-30 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                                                                      {
        <span class="comment">// fill the gaps</span>
        HouseClass *pHouse = (Firer ? Firer-&gt;Owner : NULL);

        <span class="keywordflow">if</span> (TechnoClass * curTechno = generic_cast&lt;TechnoClass *&gt; (<span class="keywordtype">object</span>)) {
                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                        Debug::Log(<span class="stringliteral">&quot;[deliverEMPDamage] Step 1: %s =&gt; %s\n&quot;</span>,
                                        (Firer ? Firer-&gt;get_ID() : NULL),
                                        curTechno-&gt;get_ID());
                }

                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#aba6c1cd17600a649e0c4f282825cd850" title="Gets whether a Techno is a valid target for EMPs fired by a house.">isEligibleEMPTarget</a>(curTechno, pHouse, Warhead-&gt;<a class="code" href="class_extension.html#a72742b36a0db81d6697da473dfe8281d">AttachedToObject</a>)) {
                        <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                                Debug::Log(<span class="stringliteral">&quot;[deliverEMPDamage] Step 2: %s\n&quot;</span>,
                                                curTechno-&gt;get_ID());
                        }

                        <span class="comment">// get the target-specific multiplier</span>
                        <span class="keywordtype">float</span> modifier = 1.0F;
                        <span class="keywordflow">if</span>(<a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a>* pExt = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.Find(curTechno-&gt;GetTechnoType())) {
                                <span class="comment">// modifier only affects bad things</span>
                                <span class="keywordflow">if</span>(Warhead-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#af595488cc118b56526cd55ec386cfffa">EMP_Duration</a> &gt; 0) {
                                        modifier = pExt-&gt;EMP_Modifier;
                                }
                        }

                        <span class="comment">// respect verses</span>
                        <span class="keywordtype">int</span> duration = (int)(Warhead-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#af595488cc118b56526cd55ec386cfffa">EMP_Duration</a> * modifier);
                        <span class="keywordflow">if</span>(<a class="code" href="class_e_m_pulse.html#a5315faaef01d515d3f8dceb582f449e8">supportVerses</a>) {
                                duration = (int)(duration * Warhead-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#ad76a8948a514b224aef138f5856364ca">Verses</a>[curTechno-&gt;GetTechnoType()-&gt;Armor].Verses);
                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(abs(Warhead-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#ad76a8948a514b224aef138f5856364ca">Verses</a>[curTechno-&gt;GetTechnoType()-&gt;Armor].Verses) &lt; 0.001) {
                                <span class="keywordflow">return</span>;
                        }

                        <span class="comment">// get the new capped value</span>
                        <span class="keywordtype">int</span> oldValue = curTechno-&gt;EMPLockRemaining;
                        <span class="keywordtype">int</span> newValue = <a class="code" href="class_helpers_1_1_alex.html#abcd04535bb1fcd3e68d8de7b8bd22044" title="Gets the new duration a stackable or absolute effect will last.">Helpers::Alex::getCappedDuration</a>(oldValue, duration, Warhead-&gt;<a class="code" href="class_warhead_type_ext_1_1_ext_data.html#a64b32fb4b774472e9d9318c26edcb8a1">EMP_Cap</a>);

                        <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                                Debug::Log(<span class="stringliteral">&quot;[deliverEMPDamage] Step 3: %d\n&quot;</span>,
                                                newValue);
                        }

                        <span class="comment">// can not be less than zero</span>
                        curTechno-&gt;EMPLockRemaining = std::max(0, newValue);
                        <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                                Debug::Log(<span class="stringliteral">&quot;[deliverEMPDamage] Step 4: %d\n&quot;</span>,
                                                newValue);
                        }

                        <span class="comment">// newly de-paralyzed</span>
                        <span class="keywordflow">if</span> ((oldValue &gt; 0) &amp;&amp; (curTechno-&gt;EMPLockRemaining &lt;= 0)) {
                                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                                        Debug::Log(<span class="stringliteral">&quot;[deliverEMPDamage] Step 5a\n&quot;</span>);
                                }
                                <a class="code" href="class_e_m_pulse.html#a46041f950a72e7479ba8d47e93937b5a" title="Sets all properties to re-enable a Techno.">DisableEMPEffect</a>(curTechno);
                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((oldValue &lt;= 0) &amp;&amp; (curTechno-&gt;EMPLockRemaining &gt; 0)) {
                                <span class="comment">// newly paralyzed unit</span>
                                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                                        Debug::Log(<span class="stringliteral">&quot;[deliverEMPDamage] Step 5b\n&quot;</span>);
                                }
                                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#a8cb96ccf83aa30ecbf474d625f1cf6ef" title="Sets all properties to disable a Techno.">enableEMPEffect</a>(curTechno, Firer)) {
                                        <span class="keywordflow">return</span>;
                                }
                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (oldValue != newValue) {
                                <span class="comment">// At least update the radar, if this is one.</span>
                                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                                        Debug::Log(<span class="stringliteral">&quot;[deliverEMPDamage] Step 5c\n&quot;</span>);
                                }
                                <a class="code" href="class_e_m_pulse.html#ae45b8d77bd3cd58bb1bfaf647af2656b" title="Updates the radar outage for the owning player.">updateRadarBlackout</a>(curTechno);
                        }

                        <span class="comment">// is techno destroyed by EMP?</span>
                        <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#af4b3b9b8ea4b6259de2b9d7f0c1d0c37" title="Checks whether a Techno should be considered destroyed.">thresholdExceeded</a>(curTechno)) {
                                curTechno-&gt;Destroyed(Firer);
                                <span class="keywordflow">if</span> (curTechno-&gt;IsInAir() &amp;&amp; curTechno-&gt;WhatAmI() == abs_Aircraft) {
                                        curTechno-&gt;Crash(Firer);
                                } <span class="keywordflow">else</span> {
                                        curTechno-&gt;Destroy();
                                        curTechno-&gt;Remove();
                                        curTechno-&gt;UnInit();
                                }

                                <span class="comment">// play unit voice</span>
                                <span class="keywordflow">if</span> (curTechno-&gt;Owner == HouseClass::Player) {
                                        TechnoTypeClass *TT = curTechno-&gt;GetTechnoType();
                                        <span class="keywordflow">if</span> (curTechno-&gt;IsInAir()) {
                                                VocClass::PlayAt(TT-&gt;VoiceCrashing, &amp;curTechno-&gt;Location, NULL);
                                        }

                                        <span class="keywordflow">if</span> (TT-&gt;VoiceDie.Count) {
                                                VocClass::PlayAt(TT-&gt;VoiceDie[rand() % TT-&gt;VoiceDie.Count], &amp;curTechno-&gt;Location, NULL);
                                        }

                                        <span class="keywordflow">if</span> (TT-&gt;DieSound.Count) {
                                                VocClass::PlayAt(TT-&gt;DieSound[rand() % TT-&gt;DieSound.Count], &amp;curTechno-&gt;Location, NULL);
                                        }
                                }
                        }
                }
        }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a46041f950a72e7479ba8d47e93937b5a"></a><!-- doxytag: member="EMPulse::DisableEMPEffect" ref="a46041f950a72e7479ba8d47e93937b5a" args="(TechnoClass *Techno)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EMPulse::DisableEMPEffect </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Victim</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets all properties to re-enable a Techno. </p>
<p>Reactivates the Techno. The EMP sparkle animation is stopped.</p>
<p>Radars come back online. Spawners are allowed to resume their work.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Victim</em>&nbsp;</td><td>The Techno that shall have its EMP effects removed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-05-03 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                   {
        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Victim);
        <span class="keywordtype">bool</span> HasPower = pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#af67664c98137d949a09602a01f44f0c8">IsPowered</a>() &amp;&amp; pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a1b88dd67b98261ab28662d7c4574dc5e">IsOperated</a>();

        <span class="keywordflow">if</span> (BuildingClass * Building = specific_cast&lt;BuildingClass *&gt;(Victim)) {
                HasPower = HasPower &amp;&amp; Building-&gt;IsPowerOnline(); <span class="comment">//Building-&gt;HasPower &amp;&amp; !(Building-&gt;Owner-&gt;PowerDrain &gt; Building-&gt;Owner-&gt;PowerOutput) ;</span>

                <span class="keywordflow">if</span> (!Building-&gt;Type-&gt;InvisibleInGame) {
                        <span class="keywordflow">if</span> (HasPower) {
                                Building-&gt;EnableStuff();
                        }
                        <a class="code" href="class_e_m_pulse.html#ae45b8d77bd3cd58bb1bfaf647af2656b" title="Updates the radar outage for the owning player.">updateRadarBlackout</a>(Building);

                        BuildingTypeClass * pType = Building-&gt;Type;
                        <span class="keywordflow">if</span> (pType-&gt;Factory) {
                                Building-&gt;Owner-&gt;Update_FactoriesQueues(pType-&gt;Factory, pType-&gt;Naval, 0);
                        }
                }
        }

        Victim-&gt;Owner-&gt;ShouldRecheckTechTree = <span class="keyword">true</span>;
        Victim-&gt;Owner-&gt;PowerBlackout = <span class="keyword">true</span>;

        <span class="keywordflow">if</span> (Victim-&gt;Deactivated &amp;&amp; HasPower) {
                Victim-&gt;Reactivate();

                <span class="comment">// allow to spawn units again.</span>
                <a class="code" href="class_e_m_pulse.html#ab8e45e0a1a4ed89481378782b5ef9d7e" title="Updates the SpawnManager to account for the EMP effect.">updateSpawnManager</a>(Victim);
                <a class="code" href="class_e_m_pulse.html#a9861f36902003925c8aaea5082f0121b" title="Updates the SlaveManager to account for the EMP effect.">updateSlaveManager</a>(Victim);

                <span class="comment">// update the animation</span>
                <a class="code" href="class_e_m_pulse.html#a61f0c37d20dc3bc29f34d497b456c239" title="Updates the sparkle animation of Techno.">UpdateSparkleAnim</a>(Victim);

                <span class="comment">// get harvesters back to work and ai units to hunt</span>
                <span class="keywordflow">if</span> (FootClass * Foot = generic_cast&lt;FootClass *&gt;(Victim)) {
                        <span class="keywordtype">bool</span> hasMission = <span class="keyword">false</span>;
                        <span class="keywordflow">if</span> (UnitClass * Unit = specific_cast&lt;UnitClass *&gt;(Victim)) {
                                <span class="keywordflow">if</span> (Unit-&gt;Type-&gt;Harvester || Unit-&gt;Type-&gt;ResourceGatherer) {
                                        <span class="comment">// prevent unloading harvesters from being irritated.</span>
                                        <span class="keywordflow">if</span> (pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a1da544f24e531f628ddfc66fcd7c62d9">EMPLastMission</a> == mission_Guard) {
                                                pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a1da544f24e531f628ddfc66fcd7c62d9">EMPLastMission</a> = mission_Enter;
                                        }

                                        Unit-&gt;QueueMission(pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a1da544f24e531f628ddfc66fcd7c62d9">EMPLastMission</a>, <span class="keyword">true</span>);
                                        hasMission = <span class="keyword">true</span>;
                                }
                        }

                        <span class="keywordflow">if</span>(!hasMission &amp;&amp; !Foot-&gt;Owner-&gt;ControlledByHuman()) {
                                Foot-&gt;QueueMission(mission_Hunt, <span class="keyword">false</span>);
                        }
                }
        }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8cb96ccf83aa30ecbf474d625f1cf6ef"></a><!-- doxytag: member="EMPulse::enableEMPEffect" ref="a8cb96ccf83aa30ecbf474d625f1cf6ef" args="(TechnoClass *, ObjectClass *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EMPulse::enableEMPEffect </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Victim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ObjectClass *&nbsp;</td>
          <td class="paramname"> <em>Source</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets all properties to disable a Techno. </p>
<p>Disables Buildings and crashes flying Aircrafts. Foots get deactivated. An EMP sparkle animation is created and played until the EMP effect ceases.</p>
<p>Contains special handling to create a radar outage equalling the length of the EMP effect, if Victim is a Building with Radar capabilities.</p>
<p>If Victim mind controls any units, they are freed. Spawned units are killed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Victim</em>&nbsp;</td><td>The Techno that is under EMP effect. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Source</em>&nbsp;</td><td>The house to credit kills to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if Victim has been destroyed by the EMP effect, False otherwise.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-05-21 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                                        {
        Victim-&gt;Owner-&gt;ShouldRecheckTechTree = <span class="keyword">true</span>;
        Victim-&gt;Owner-&gt;PowerBlackout = <span class="keyword">true</span>;

        <span class="keywordflow">if</span> (BuildingClass * Building = specific_cast&lt;BuildingClass *&gt;(Victim)) {
                Building-&gt;DisableStuff();
                <a class="code" href="class_e_m_pulse.html#ae45b8d77bd3cd58bb1bfaf647af2656b" title="Updates the radar outage for the owning player.">updateRadarBlackout</a>(Building);

                BuildingTypeClass * pType = Building-&gt;Type;
                <span class="keywordflow">if</span> (pType-&gt;Factory) {
                        Building-&gt;Owner-&gt;Update_FactoriesQueues(pType-&gt;Factory, pType-&gt;Naval, 0);
                }
        } <span class="keywordflow">else</span> {
                <span class="keywordflow">if</span> (AircraftClass * Aircraft = specific_cast&lt;AircraftClass *&gt;(Victim)) {
                        <span class="comment">// crash flying aircraft</span>
                        <span class="keywordflow">if</span> (Aircraft-&gt;IsInAir()) {
                                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">EMPulse::verbose</a>) {
                                        Debug::Log(<span class="stringliteral">&quot;[enableEMPEffect] Plane crash: %s\n&quot;</span>, Aircraft-&gt;get_ID());
                                }
                                <span class="keywordflow">if</span> (Victim-&gt;Owner == HouseClass::Player) {
                                        VocClass::PlayAt(Aircraft-&gt;Type-&gt;VoiceCrashing, &amp;Aircraft-&gt;Location, NULL);
                                }
                                Aircraft-&gt;Crash(Source);
                                Aircraft-&gt;Destroyed(Source);
                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        }
                }
        }

        <span class="comment">// deactivate and sparkle</span>
        <span class="keywordflow">if</span> (!Victim-&gt;Deactivated &amp;&amp; <a class="code" href="class_e_m_pulse.html#ae2a7d8be2beb4057f72e5aec4f2cdcb1" title="Gets whether this Techno should be deactivated right now.">IsDeactivationAdvisable</a>(Victim)) {
                <span class="comment">// cache the last mission this thing did</span>
                <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Victim);
                pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a1da544f24e531f628ddfc66fcd7c62d9">EMPLastMission</a> = Victim-&gt;CurrentMission;

                <span class="comment">// remove the unit from its team</span>
                <span class="keywordflow">if</span> (FootClass * Foot = generic_cast&lt;FootClass *&gt;(Victim)) {
                        <span class="keywordflow">if</span> (Foot-&gt;BelongsToATeam()) {
                                Foot-&gt;Team-&gt;LiberateMember(Foot);
                        }
                }

                <span class="keywordtype">bool</span> selected = Victim-&gt;IsSelected;
                Victim-&gt;Deactivate();
                <span class="keywordflow">if</span>(selected) {
                        <span class="keywordtype">bool</span> feedback = Unsorted::MoveFeedback;
                        Unsorted::MoveFeedback = <span class="keyword">false</span>;
                        Victim-&gt;Select();
                        Unsorted::MoveFeedback = feedback;
                }

                <span class="comment">// release all captured units.</span>
                <span class="keywordflow">if</span> (Victim-&gt;CaptureManager) {
                        Victim-&gt;CaptureManager-&gt;FreeAll();
                }

                <span class="comment">// update managers.</span>
                <a class="code" href="class_e_m_pulse.html#ab8e45e0a1a4ed89481378782b5ef9d7e" title="Updates the SpawnManager to account for the EMP effect.">updateSpawnManager</a>(Victim, Source);
                <a class="code" href="class_e_m_pulse.html#a9861f36902003925c8aaea5082f0121b" title="Updates the SlaveManager to account for the EMP effect.">updateSlaveManager</a>(Victim);

                <span class="comment">// set the sparkle animation.</span>
                <a class="code" href="class_e_m_pulse.html#a61f0c37d20dc3bc29f34d497b456c239" title="Updates the sparkle animation of Techno.">UpdateSparkleAnim</a>(Victim);
        }

        <span class="comment">// warn the player</span>
        <span class="keywordflow">if</span>(Source) <a class="code" href="class_e_m_pulse.html#a85881f5b68e24bef805079881666bceb" title="If the victim is owned by the human player creates radar events and EVA warnings.">announceAttack</a>(Victim);

        <span class="comment">// the unit still lives.</span>
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a12fb80c513248acdd3e1e64a13fb91e2"></a><!-- doxytag: member="EMPulse::isCurrentlyEMPImmune" ref="a12fb80c513248acdd3e1e64a13fb91e2" args="(TechnoClass *, HouseClass *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EMPulse::isCurrentlyEMPImmune </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HouseClass *&nbsp;</td>
          <td class="paramname"> <em>SourceHouse</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets whether a Techno is currently immune to EMPs fired by a house. </p>
<p>Target may not be immune to EMP but its current status still prevents it from being affected by them.</p>
<p>Currently, EMPs can be temporarily averted if Target is under the influence of the Iron Curtain or it is attacked by a Temporal warhead.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Target</em>&nbsp;</td><td>The Techno the EMP is fired at. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SourceHouse</em>&nbsp;</td><td>The house that fired the EMP.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if Target is immune to EMP, false otherwise.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-05-26 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                                                 {
        <span class="comment">// objects currently doing some time travel are exempt</span>
        <span class="keywordflow">if</span> (Target-&gt;BeingWarpedOut) {
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }

        <span class="comment">// iron curtained objects can not be affected by EMPs</span>
        <span class="keywordflow">if</span> (Target-&gt;IsIronCurtained()) {
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }

        <span class="comment">// the current status does allow this target to</span>
        <span class="comment">// be affected by EMPs. It may be immune, though.</span>
        <span class="keywordflow">return</span> <a class="code" href="class_e_m_pulse.html#a5871a06d4aaa50bf1b3cc0b6b37936cf" title="Gets whether a Techno is immune to an EMP fired by a house.">isEMPImmune</a>(Target, SourceHouse);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae2a7d8be2beb4057f72e5aec4f2cdcb1"></a><!-- doxytag: member="EMPulse::IsDeactivationAdvisable" ref="ae2a7d8be2beb4057f72e5aec4f2cdcb1" args="(TechnoClass *Techno)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EMPulse::IsDeactivationAdvisable </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Target</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets whether this Techno should be deactivated right now. </p>
<p>Objects that are currently deploying, constructing, or selling should not be deactivated.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Target</em>&nbsp;</td><td>The Techno to be deactivated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if Target should be deactivated, false otherwise.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-05-09 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                          {
        <span class="keywordflow">switch</span>(Target-&gt;CurrentMission)
        {
        <span class="keywordflow">case</span> mission_Selling:
        <span class="keywordflow">case</span> mission_Construction:
        <span class="keywordflow">case</span> mission_Unload:
                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">EMPulse::verbose</a>) {
                        Debug::Log(<span class="stringliteral">&quot;[IsDeactivationAdvisable] %s should not be disabled. Mission: %d\n&quot;</span>, Target-&gt;get_ID(), Target-&gt;CurrentMission);
                }
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }

        <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">EMPulse::verbose</a>) {
                Debug::Log(<span class="stringliteral">&quot;[IsDeactivationAdvisable] %s should be disabled. Mission: %d\n&quot;</span>, Target-&gt;get_ID(), Target-&gt;CurrentMission);
        }
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aba6c1cd17600a649e0c4f282825cd850"></a><!-- doxytag: member="EMPulse::isEligibleEMPTarget" ref="aba6c1cd17600a649e0c4f282825cd850" args="(TechnoClass *, HouseClass *, WarheadTypeClass *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EMPulse::isEligibleEMPTarget </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HouseClass *&nbsp;</td>
          <td class="paramname"> <em>SourceHouse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WarheadTypeClass *&nbsp;</td>
          <td class="paramname"> <em>Warhead</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets whether a Techno is a valid target for EMPs fired by a house. </p>
<p>An eligible target is not currently immune to EMPs and the EMP would have an effect.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Target</em>&nbsp;</td><td>The Techno the EMP will be fired at. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SourceHouse</em>&nbsp;</td><td>The house that fired the EMP.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True Target is eligible, false otherwise.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-04-30 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                                                                           {
        <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#a12fb80c513248acdd3e1e64a13fb91e2" title="Gets whether a Techno is currently immune to EMPs fired by a house.">isCurrentlyEMPImmune</a>(Target, SourceHouse)) {
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }

        <span class="keywordflow">if</span> (!<a class="code" href="class_warhead_type_ext.html#aa48823644e4bd1b79a7ef4b917131191" title="Gets whether a Techno can be affected by a warhead fired by a house.">WarheadTypeExt::canWarheadAffectTarget</a>(Target, SourceHouse, Warhead)) {
                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                        Debug::Log(<span class="stringliteral">&quot;[isEligibleEMPTarget] \&quot;%s\&quot; does not affect target.\n&quot;</span>, Warhead-&gt;ID);
                }
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5871a06d4aaa50bf1b3cc0b6b37936cf"></a><!-- doxytag: member="EMPulse::isEMPImmune" ref="a5871a06d4aaa50bf1b3cc0b6b37936cf" args="(TechnoClass *, HouseClass *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EMPulse::isEMPImmune </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HouseClass *&nbsp;</td>
          <td class="paramname"> <em>SourceHouse</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets whether a Techno is immune to an EMP fired by a house. </p>
<p>Target can not be affected by EMPs if it is either immune to EMPs or type immune. It may also have recieved EMP immunity through it's veterancy.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Target</em>&nbsp;</td><td>The Techno the EMP is fired at. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SourceHouse</em>&nbsp;</td><td>The house that fired the EMP.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if Target is immune to EMP, false otherwise.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-05-02 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                                        {
        <span class="comment">// this can be overridden by a flag on the techno.</span>
        <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Target-&gt;GetTechnoType());

        <span class="keywordflow">if</span> (pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#ac2a2a29b93e918487a7f415b40c1974a">ImmuneToEMP</a>.<a class="code" href="class_customizable.html#a3dc2b0918c34c90837994b776f52139c">Get</a>()) {
                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                        Debug::Log(<span class="stringliteral">&quot;[isEMPImmune] \&quot;%s\&quot; is ImmuneToEMP.\n&quot;</span>, Target-&gt;get_ID());
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }

        <span class="comment">// this may be immune because of veteran and elite abilities.</span>
        <span class="keywordflow">if</span> (Target-&gt;Veterancy.IsElite() &amp;&amp; (pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a1b537536ee2ebe9b15e8591f22810036">EliteAbilityEMPIMMUNE</a> || pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a680b463facf7ba391169c75e1bee709f">VeteranAbilityEMPIMMUNE</a>)) {
                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                        Debug::Log(<span class="stringliteral">&quot;[isEMPImmune] \&quot;%s\&quot; is immune because it is elite.\n&quot;</span>, Target-&gt;get_ID());
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Target-&gt;Veterancy.IsVeteran() &amp;&amp; pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a680b463facf7ba391169c75e1bee709f">VeteranAbilityEMPIMMUNE</a>) {
                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                        Debug::Log(<span class="stringliteral">&quot;[isEMPImmune] \&quot;%s\&quot; is immune because it is veteran.\n&quot;</span>, Target-&gt;get_ID());
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }

        <span class="comment">// if houses differ, TypeImmune does not count.</span>
        <span class="keywordflow">if</span> (Target-&gt;Owner == SourceHouse) {
                <span class="comment">// ignore if type immune. don&#39;t even try.</span>
                <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#a42ff43d73b38e829f54e42f5ca5daade" title="Gets whether a Techno is type immune to EMP.">isEMPTypeImmune</a>(Target)) {
                        <span class="comment">// This unit can fire emps and type immunity</span>
                        <span class="comment">// grants it to never be affected.</span>
                        <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                                Debug::Log(<span class="stringliteral">&quot;[isEMPImmune] \&quot;%s\&quot; is TypeImmune.\n&quot;</span>, Target-&gt;get_ID());
                        }
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
        }

        <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a42ff43d73b38e829f54e42f5ca5daade"></a><!-- doxytag: member="EMPulse::isEMPTypeImmune" ref="a42ff43d73b38e829f54e42f5ca5daade" args="(TechnoClass *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EMPulse::isEMPTypeImmune </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Target</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets whether a Techno is type immune to EMP. </p>
<p>Type immunity does work a little different for EMP weapons than for ordinary projectiles. Target is type immune to EMP if it has a weapon that uses a warhead also having EMP.Duration set. It is irrelevant which Techno fired the EMP.</p>
<p>If Target is elite, only EliteWeapons are used to check for a non-zero EMP.Duration, otherwise only ordinary Weapons are used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Target</em>&nbsp;</td><td>The Techno to check EMP type immunity for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if Target is type immune to EMP, false otherwise.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-04-27 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                  {
        <span class="comment">// find an emp weapon.</span>
        TechnoTypeClass *TT = Target-&gt;GetTechnoType();
        <span class="keywordflow">if</span> (TT-&gt;TypeImmune) {
                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 18; ++i) {
                        WeaponTypeClass *WeaponType = (!Target-&gt;Veterancy.IsElite())
                                ? TT-&gt;get_Weapon(i)
                                : TT-&gt;get_EliteWeapon(i);
                        <span class="keywordflow">if</span> (!WeaponType) {
                                <span class="keywordflow">continue</span>;
                        }

                        WarheadTypeClass *WarheadType = WeaponType-&gt;Warhead;
                        <span class="keywordflow">if</span> (<a class="code" href="class_warhead_type_ext_1_1_ext_data.html">WarheadTypeExt::ExtData</a> *pWH = <a class="code" href="class_warhead_type_ext.html#ab2eb86c684fe6f15f9f95a9aa171e7dd">WarheadTypeExt::ExtMap</a>.Find(WarheadType)) {
                                <span class="keywordflow">if</span> (pWH-&gt;EMP_Duration != 0) {
                                        <span class="comment">// this unit can fire emps and type immunity</span>
                                        <span class="comment">// grants it to never be affected.</span>
                                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                                }
                        }
                }
        }

        <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="acae411b2800c152fdb7647c912a421e0"></a><!-- doxytag: member="EMPulse::IsTypeEMPProne" ref="acae411b2800c152fdb7647c912a421e0" args="(TechnoTypeClass *Type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EMPulse::IsTypeEMPProne </td>
          <td>(</td>
          <td class="paramtype">TechnoTypeClass *&nbsp;</td>
          <td class="paramname"> <em>Type</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets whether an EMP would have an effect on a TechnoType. </p>
<p>Infantry that has Cyborg set is prone to EMP.</p>
<p>Non-Infantry Foots are prone only if they aren't organic.</p>
<p>Buildings with special functions like Radar, SuperWeapon, PowersUnit, Sensors, LaserFencePost, GapGenerator and UndeploysInto are prone. Otherwise a Building is prone if it consumes power and is Powered.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Type</em>&nbsp;</td><td>The TechnoType to get the susceptibility to EMP of.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if Type is prone to EMPs, false otherwise.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-04-30 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                   {
        <span class="keywordtype">bool</span> prone = <span class="keyword">true</span>;

        <span class="comment">// buildings are emp prone if they consume power and need it to function</span>
        <span class="keywordflow">if</span> (BuildingTypeClass * BuildingType = specific_cast&lt;BuildingTypeClass *&gt;(Type)) {
                prone = (BuildingType-&gt;Powered &amp;&amp; (BuildingType-&gt;PowerDrain &gt; 0));

                <span class="comment">// may have a special function.</span>
                <span class="keywordflow">if</span> (BuildingType-&gt;Radar ||
                        (BuildingType-&gt;SuperWeapon&gt; -1) || (BuildingType-&gt;SuperWeapon2 &gt; -1)
                        || BuildingType-&gt;UndeploysInto
                        || BuildingType-&gt;PowersUnit
                        || BuildingType-&gt;Sensors
                        || BuildingType-&gt;LaserFencePost
                        || BuildingType-&gt;GapGenerator) {
                                prone = <span class="keyword">true</span>;
                }
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InfantryTypeClass * InfantryType = specific_cast&lt;InfantryTypeClass *&gt;(Type)) {
                <span class="comment">// affected only if this is a cyborg.</span>
                prone = InfantryType-&gt;Cyborg_;
        } <span class="keywordflow">else</span> {
                <span class="comment">// if this is a vessel or vehicle that is organic: no effect.</span>
                prone = !Type-&gt;Organic;
        }

        <span class="keywordflow">return</span> prone;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af4b3b9b8ea4b6259de2b9d7f0c1d0c37"></a><!-- doxytag: member="EMPulse::thresholdExceeded" ref="af4b3b9b8ea4b6259de2b9d7f0c1d0c37" args="(TechnoClass *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool EMPulse::thresholdExceeded </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Victim</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks whether a Techno should be considered destroyed. </p>
<p>A techno can be destroyed by excessive EMP damage. If the treshold is positive it acts as a upper limit. If it is negative it is only a limit if the unit is in the air (parachuting doesn't count).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Victim</em>&nbsp;</td><td>The Techno that is under EMP effect.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if Victim has taken too much EMP damage, False otherwise.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-05-20 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                    {
        <a class="code" href="class_techno_type_ext_1_1_ext_data.html">TechnoTypeExt::ExtData</a> *pData = <a class="code" href="class_techno_type_ext.html#acc5f01db1b341572a92ad754a7d15c48">TechnoTypeExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Victim-&gt;GetTechnoType());

        <span class="keywordflow">if</span> (<a class="code" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307" title="Enables verbose debug output for some WarheadTypeExt functions.">verbose</a>) {
                Debug::Log(<span class="stringliteral">&quot;[thresholdExceeded] %s: %d %d\n&quot;</span>, Victim-&gt;get_ID(), pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a79f0a604e71aea21b3c1d417956aa11c">EMP_Threshold</a>, Victim-&gt;EMPLockRemaining);
        }

        <span class="keywordflow">if</span> ((pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a79f0a604e71aea21b3c1d417956aa11c">EMP_Threshold</a> != 0) &amp;&amp; (Victim-&gt;EMPLockRemaining &gt; (DWORD)abs(pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a79f0a604e71aea21b3c1d417956aa11c">EMP_Threshold</a>))) {
                <span class="keywordflow">if</span> ((pData-&gt;<a class="code" href="class_techno_type_ext_1_1_ext_data.html#a79f0a604e71aea21b3c1d417956aa11c">EMP_Threshold</a> &gt; 0) || (Victim-&gt;IsInAir() &amp;&amp; !Victim-&gt;HasParachute)) {
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
        }

        <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae45b8d77bd3cd58bb1bfaf647af2656b"></a><!-- doxytag: member="EMPulse::updateRadarBlackout" ref="ae45b8d77bd3cd58bb1bfaf647af2656b" args="(TechnoClass *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EMPulse::updateRadarBlackout </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Techno</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates the radar outage for the owning player. </p>
<p>If this is a structure providing radar or spy satellite abilities the original check for radar facilities is invoked by setting a flag.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Techno</em>&nbsp;</td><td>The Techno that might be a Radar or SpySat structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-11-28 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                      {
        <span class="keywordflow">if</span> (BuildingClass * Building = specific_cast&lt;BuildingClass *&gt;(Techno)) {
                <span class="keywordflow">if</span> (!Building-&gt;Type-&gt;InvisibleInGame) {
                        <span class="keywordflow">if</span> (Building-&gt;Type-&gt;Radar || Building-&gt;Type-&gt;SpySat) {
                                Building-&gt;Owner-&gt;RadarBlackout = <span class="keyword">true</span>;
                        }
                }
        }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9861f36902003925c8aaea5082f0121b"></a><!-- doxytag: member="EMPulse::updateSlaveManager" ref="a9861f36902003925c8aaea5082f0121b" args="(TechnoClass *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EMPulse::updateSlaveManager </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Techno</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates the SlaveManager to account for the EMP effect. </p>
<p>Stops the slaves where they are standing until the EMP effect is over.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Techno</em>&nbsp;</td><td>The Techno that might be an enslaver.</td></tr>
  </table>
  </dd>
</dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-05-07 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                     {
        <span class="keywordflow">if</span> (SlaveManagerClass *SM = Techno-&gt;SlaveManager) {

                <span class="keywordflow">if</span> (Techno-&gt;EMPLockRemaining &gt; 0) {
                        <span class="comment">// pause the timers so spawning and regenerating is deferred.</span>
                        SM-&gt;RespawnTimer.StartTime = -1;
                } <span class="keywordflow">else</span> {
                        <span class="comment">// resume slaving around.</span>
                        SM-&gt;RespawnTimer.StartIfEmpty();
                }
        }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a61f0c37d20dc3bc29f34d497b456c239"></a><!-- doxytag: member="EMPulse::UpdateSparkleAnim" ref="a61f0c37d20dc3bc29f34d497b456c239" args="(TechnoClass *Techno)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EMPulse::UpdateSparkleAnim </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Techno</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates the sparkle animation of Techno. </p>
<p>Enables or disables the EMP sparkle animation.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Techno</em>&nbsp;</td><td>The Techno to update.</td></tr>
  </table>
  </dd>
</dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-05-09 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                    {
        <a class="code" href="class_techno_ext_1_1_ext_data.html">TechnoExt::ExtData</a> *pData = <a class="code" href="class_techno_ext.html#a3cdb7f8ccc49548f0b621ff80df0e8fb">TechnoExt::ExtMap</a>.<a class="code" href="class_container.html#a90ddec0f8fb14f5a9894e128c2f938fc">Find</a>(Techno);
        <span class="keywordflow">if</span> (pData) {
                <span class="keywordflow">if</span> (Techno-&gt;IsUnderEMP()) {
                        <span class="keywordflow">if</span> (!pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a6ea76eedf486a71396cb0ee061cd308b">EMPSparkleAnim</a> &amp;&amp; RulesClass::Instance-&gt;EMPulseSparkles) {
                                GAME_ALLOC(AnimClass, pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a6ea76eedf486a71396cb0ee061cd308b">EMPSparkleAnim</a>, RulesClass::Instance-&gt;EMPulseSparkles, &amp;Techno-&gt;Location);
                                pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a6ea76eedf486a71396cb0ee061cd308b">EMPSparkleAnim</a>-&gt;SetOwnerObject(Techno);
                        }
                } <span class="keywordflow">else</span> {
                        <span class="keywordflow">if</span> (pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a6ea76eedf486a71396cb0ee061cd308b">EMPSparkleAnim</a>) {
                                pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a6ea76eedf486a71396cb0ee061cd308b">EMPSparkleAnim</a>-&gt;RemainingIterations = 0; <span class="comment">// basically &quot;you don&#39;t need to show up anymore&quot;</span>
                                pData-&gt;<a class="code" href="class_techno_ext_1_1_ext_data.html#a6ea76eedf486a71396cb0ee061cd308b">EMPSparkleAnim</a> = NULL;
                        }
                }
        }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab8e45e0a1a4ed89481378782b5ef9d7e"></a><!-- doxytag: member="EMPulse::updateSpawnManager" ref="ab8e45e0a1a4ed89481378782b5ef9d7e" args="(TechnoClass *, ObjectClass *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EMPulse::updateSpawnManager </td>
          <td>(</td>
          <td class="paramtype">TechnoClass *&nbsp;</td>
          <td class="paramname"> <em>Techno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ObjectClass *&nbsp;</td>
          <td class="paramname"> <em>Source</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates the SpawnManager to account for the EMP effect. </p>
<p>Defers all regeneration and spawning until after the EMP effect is over. If spawned units are on the go, that is, launching or flying, they are destroyed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Techno</em>&nbsp;</td><td>The Techno that might be a spawner.</td></tr>
  </table>
  </dd>
</dl>
<dl class="author"><dt><b>Author:</b></dt><dd>AlexB </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010-05-03 </dd></dl>

<p><div class="fragment"><pre class="fragment">                                                                                  {
        <span class="keywordflow">if</span> (SpawnManagerClass *SM = Techno-&gt;SpawnManager) {

                <span class="keywordflow">if</span> (Techno-&gt;EMPLockRemaining &gt; 0) {
                        <span class="comment">// crash all spawned units that are visible. else, they&#39;d land somewhere else.</span>
                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; SM-&gt;SpawnedNodes.Count; ++i) {
                                SpawnNode *spawn = SM-&gt;SpawnedNodes.GetItem(i);
                                <span class="comment">// kill every spawned unit that is in the air. exempt missiles.</span>
                                <span class="keywordflow">if</span>(!spawn-&gt;IsSpawnMissile &amp;&amp; spawn-&gt;Unit &amp;&amp; spawn-&gt;Status &gt;= 0 &amp;&amp; spawn-&gt;Status &lt;= 4) {
                                        spawn-&gt;Unit-&gt;Crash(Source);
                                }
                        }

                        <span class="comment">// pause the timers so spawning and regenerating is deferred.</span>
                        SM-&gt;SpawnTimer.StartTime = -1;
                        SM-&gt;UnknownTimer.StartTime = -1;
                } <span class="keywordflow">else</span> {
                        <span class="comment">// resume counting.</span>
                        SM-&gt;SpawnTimer.StartIfEmpty();
                        SM-&gt;UnknownTimer.StartIfEmpty();
                }
        }
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a5315faaef01d515d3f8dceb582f449e8"></a><!-- doxytag: member="EMPulse::supportVerses" ref="a5315faaef01d515d3f8dceb582f449e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_e_m_pulse.html#a5315faaef01d515d3f8dceb582f449e8">EMPulse::supportVerses</a> = false<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac5be0a3f0350827da617ba594d1cd307"></a><!-- doxytag: member="EMPulse::verbose" ref="ac5be0a3f0350827da617ba594d1cd307" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_e_m_pulse.html#ac5be0a3f0350827da617ba594d1cd307">EMPulse::verbose</a> = false<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enables verbose debug output for some <a class="el" href="class_warhead_type_ext.html">WarheadTypeExt</a> functions. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Misc/<a class="el" href="_e_m_pulse_8h.html">EMPulse.h</a></li>
<li>Misc/<a class="el" href="_e_m_pulse_8cpp.html">EMPulse.cpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Mar 23 2011 23:29:47 for Ares by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
